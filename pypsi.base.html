

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5. pypsi.base - Base classes for pluggable features &mdash; pypsi 1.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="pypsi 1.2 documentation" href="index.html"/>
        <link rel="next" title="6. pypsi.cmdline - User input processing" href="pypsi.cmdline.html"/>
        <link rel="prev" title="4. pypsi.shell - Pypsi Shell" href="pypsi.shell.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> pypsi</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://github.com/ameily/pypsi">Github</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.python.org/pypi/pypsi">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.tutorial.html">1. Pypsi Shell and Command Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pypsi.tutorial.html#command-api">1.1. Command API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.tutorial.html#shell-api">1.2. Shell API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.commands.html">2. Pypsi Builtin Commands</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.plugins.html">3. Pypsi Builtin Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pypsi.plugins.html#module-pypsi.plugins.block">3.1. Block Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.plugins.html#escape-sequence-processors">3.2. Escape Sequence Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.plugins.html#module-pypsi.plugins.history">3.3. Shell History</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.plugins.html#module-pypsi.plugins.variable">3.4. Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.plugins.html#module-pypsi.plugins.cmd">3.5. Cmd</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.shell.html">4. pypsi.shell - Pypsi Shell</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">5. pypsi.base - Base classes for pluggable features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-objects">5.1. Command objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plugin-objects">5.2. Plugin objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#argument-parsing">5.3. Argument parsing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.cmdline.html">6. pypsi.cmdline - User input processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pypsi.cmdline.html#commands-and-expressions">6.1. Commands and expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.cmdline.html#tokens">6.2. Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="pypsi.cmdline.html#statements">6.3. Statements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.namespace.html">7. pypsi.namespace - Arbitrary attribute storage classes</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.format.html">8. pypsi.format - Stream output formatting</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.stream.html">9. pypsi.stream - File streams</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.utils.html">10. pypsi.utils - Utility functions</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.wizard.html">11. pypsi.wizard - Prompt Wizards</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pypsi.demo.html">12. Pypsi Demo Shell</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pypsi</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>5. pypsi.base - Base classes for pluggable features</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/pypsi.base.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="pypsi-base-base-classes-for-pluggable-features">
<h1>5. pypsi.base - Base classes for pluggable features<a class="headerlink" href="#pypsi-base-base-classes-for-pluggable-features" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<span class="target" id="module-pypsi.base"></span><p>Base classes for developing pluggable commands and plugins.</p>
<div class="section" id="command-objects">
<h2>5.1. Command objects<a class="headerlink" href="#command-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypsi.base.Command">
<em class="property">class </em><tt class="descclassname">pypsi.base.</tt><tt class="descname">Command</tt><big>(</big><em>name</em>, <em>usage=None</em>, <em>brief=None</em>, <em>topic=None</em>, <em>pipe='str'</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.object</span></tt></p>
<p>A pluggable command that users can execute. All commands need to derive from
this class. When a command is executed by a user, the command&#8217;s <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a>
method will be called. The return value of the <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a> method is used
when processing forthcoming commands in the active statement. The return
value must be an <tt class="xref py py-class docutils literal"><span class="pre">int</span></tt> and follows the Unix standard: 0 on success,
less than 0 on error, and greater than 0 given invalid input or incorrect
usage.</p>
<p>Each command has a topic associated with it. This topic can be referenced by
commands such as <a class="reference internal" href="pypsi.commands.html#pypsi.commands.help.HelpCommand" title="pypsi.commands.help.HelpCommand"><tt class="xref py py-class docutils literal"><span class="pre">pypsi.commands.help.HelpCommand</span></tt></a> to categorize
commands in help messages.</p>
<p>A command can be used as a fallback handler by implementing the
<a class="reference internal" href="#pypsi.base.Command.fallback" title="pypsi.base.Command.fallback"><tt class="xref py py-meth docutils literal"><span class="pre">fallback()</span></tt></a> method. This is similar to the <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a> method, except
that is accepts one more argument: the command name to execute that wasn&#8217;t
found by the shell. The return value of <a class="reference internal" href="#pypsi.base.Command.fallback" title="pypsi.base.Command.fallback"><tt class="xref py py-meth docutils literal"><span class="pre">fallback()</span></tt></a> holds the same
purpose as the return value of <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a>.</p>
<p>By the time <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a> is called, the system streams have been updated to
point to the current file streams. This means that the statement context&#8217;s
system streams are the same as the global streams in the <a class="reference external" href="http://docs.python.org/3.3/library/sys.html#module-sys" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">sys</span></tt></a> module.
For example, to write to <cite>stdout</cite>, a command may perform any of the
following in the <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a> method, all of which are equivalent:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ctx.stdout.write(&quot;Hello\n&quot;)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">sys.stdout.write(&quot;Hello\n&quot;)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">print(&quot;Hello&quot;)</span></tt></li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the name of the command which the user will reference
in the shell</li>
<li><strong>usage</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the usage message to be displayed to the user</li>
<li><strong>brief</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; a brief description of the command</li>
<li><strong>topic</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the topic that this command belongs to</li>
<li><strong>pipe</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the type of data that will be read from and written to
any pipes</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pypsi.base.Command.complete">
<tt class="descname">complete</tt><big>(</big><em>shell</em>, <em>args</em>, <em>prefix</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command.complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the user attempts a tab-completion action for this command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; the list of arguments, the last one containing the
cursor position</li>
<li><strong>prefix</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the prefix that all items returned must start with</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns list:</th><td class="field-body"><p class="first last">the list of strings that could complete the current action</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Command.error">
<tt class="descname">error</tt><big>(</big><em>shell</em>, <em>*args</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command.error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Display an error message to the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> &#8211; the error message to display</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Command.fallback">
<tt class="descname">fallback</tt><big>(</big><em>shell</em>, <em>name</em>, <em>args</em>, <em>ctx</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command.fallback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command.fallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when this command was set as the fallback command. The only
difference between this and <a class="reference internal" href="#pypsi.base.Command.run" title="pypsi.base.Command.run"><tt class="xref py py-meth docutils literal"><span class="pre">run()</span></tt></a> is that this method accepts the
command name that was entered by the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the name of the command to run</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; arguments</li>
<li><strong>ctx</strong> (<a class="reference internal" href="pypsi.cmdline.html#pypsi.cmdline.StatementContext" title="pypsi.cmdline.StatementContext"><em>pypsi.cmdline.StatementContext</em></a>) &#8211; the active context</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body"><p class="first last">0 on success, less than 0 on error, and greater than 0 on
invalid usage</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Command.run">
<tt class="descname">run</tt><big>(</big><em>shell</em>, <em>args</em>, <em>ctx</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the command. All commands need to implement this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; list of string arguments</li>
<li><strong>pypsi.cmdline.StatementContext</strong> &#8211; the current statement context</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body"><p class="first last">0 on success, less than 0 on error, and greater than 0 on
invalid usage</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Command.setup">
<tt class="descname">setup</tt><big>(</big><em>shell</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the plugin has been registered to the active shell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on error</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Command.usage_error">
<tt class="descname">usage_error</tt><big>(</big><em>shell</em>, <em>*args</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Command.usage_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Command.usage_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Display an error message that indicates incorrect usage of this command.
After the error is displayed, the usage is printed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>args</strong> &#8211; list of strings that are the error message</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="plugin-objects">
<h2>5.2. Plugin objects<a class="headerlink" href="#plugin-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypsi.base.Plugin">
<em class="property">class </em><tt class="descclassname">pypsi.base.</tt><tt class="descname">Plugin</tt><big>(</big><em>preprocess=None</em>, <em>postprocess=None</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Plugin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.object</span></tt></p>
<p>A plugin is an object that is able to modify a <a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><tt class="xref py py-class docutils literal"><span class="pre">pypsi.shell.Shell</span></tt></a>
object&#8217;s behavior. Whereas a command can be execute from user input, the
<cite>Plugin</cite> class does not contain a <cite>run()</cite> function.</p>
<p>Constructor can take two parameters: <cite>preprocess</cite> and <cite>postprocess</cite>. These
values determine where the plugin resides inside of the preprocess and
postprocess list. This list, inside of <a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><tt class="xref py py-class docutils literal"><span class="pre">pypsi.shell.Shell</span></tt></a>, is iterated
sequentially, from most priority to least. So, the highest priority
value is 0, which means it will be the first plugin to run, and the
lowest value is 100, which means it will be the last plugin to run. If
either value is <cite>None</cite>, the plugin is not added to the processing list.
For example, if this plugin only provides a preprocessing functionality,
then postprocess should be set to <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>preprocess</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; the preprocess priority</li>
<li><strong>postprocess</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; the postprocess priority</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pypsi.base.Plugin.on_input">
<tt class="descname">on_input</tt><big>(</big><em>shell</em>, <em>line</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Plugin.on_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Plugin.on_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after input from the user has been received. The return value is
the preprocessed line. This means that modifying the line argument will
not populate back. If this function does no preprocessing, return line
unmodified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>line</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the current input statement string</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns str:</th><td class="field-body"><p class="first last">the preprocessed line</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Plugin.on_input_canceled">
<tt class="descname">on_input_canceled</tt><big>(</big><em>shell</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Plugin.on_input_canceled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Plugin.on_input_canceled" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the user can canceled entering a statement via SIGINT
(Ctrl+C).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on error</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Plugin.on_statement_finished">
<tt class="descname">on_statement_finished</tt><big>(</big><em>shell</em>, <em>rc</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Plugin.on_statement_finished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Plugin.on_statement_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a statement has been completely executed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on error</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Plugin.on_tokenize">
<tt class="descname">on_tokenize</tt><big>(</big><em>shell</em>, <em>tokens</em>, <em>origin</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Plugin.on_tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Plugin.on_tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after an input string has been tokenized. If this function
performs no preprocessing, return the tokens unmodified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</li>
<li><strong>tokens</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#list" title="(in Python v3.4)"><em>list</em></a>) &#8211; the list of <a class="reference internal" href="pypsi.cmdline.html#pypsi.cmdline.Token" title="pypsi.cmdline.Token"><tt class="xref py py-class docutils literal"><span class="pre">pypsi.cmdline.Token</span></tt></a> objects</li>
<li><strong>origin</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; the origin of the input, can be either &#8216;input&#8217; if
received from a call to <cite>input()</cite> or &#8216;prompt&#8217; if the input is the
prompt to display to the user</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns list:</th><td class="field-body"><p class="first last">the list of preprocessed <a class="reference internal" href="pypsi.cmdline.html#pypsi.cmdline.Token" title="pypsi.cmdline.Token"><tt class="xref py py-class docutils literal"><span class="pre">pypsi.cmdline.Token</span></tt></a>
objects</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypsi.base.Plugin.setup">
<tt class="descname">setup</tt><big>(</big><em>shell</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#Plugin.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.Plugin.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after the plugin has been registered to the active shell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>shell</strong> (<a class="reference internal" href="pypsi.shell.html#pypsi.shell.Shell" title="pypsi.shell.Shell"><em>pypsi.shell.Shell</em></a>) &#8211; the active shell</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns int:</th><td class="field-body">0 on success, -1 on failure</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="argument-parsing">
<h2>5.3. Argument parsing<a class="headerlink" href="#argument-parsing" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypsi.base.PypsiArgParser">
<em class="property">class </em><tt class="descclassname">pypsi.base.</tt><tt class="descname">PypsiArgParser</tt><big>(</big><em>prog=None</em>, <em>usage=None</em>, <em>description=None</em>, <em>epilog=None</em>, <em>parents=[]</em>, <em>formatter_class=&lt;class 'argparse.HelpFormatter'&gt;</em>, <em>prefix_chars='-'</em>, <em>fromfile_prefix_chars=None</em>, <em>argument_default=None</em>, <em>conflict_handler='error'</em>, <em>add_help=True</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#PypsiArgParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.PypsiArgParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3.3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">argparse.ArgumentParser</span></tt></a></p>
<p>Customized <a class="reference external" href="http://docs.python.org/3.3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">argparse.ArgumentParser</span></tt></a> for use in pypsi. This class slightly
modifies the base ArgumentParser so that the following occurs:</p>
<ul class="simple">
<li>The whole program does not exit on printing the help message or bad
arguments</li>
<li>Any error messages are intercepted and printed on the active shell&#8217;s error
stream</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="pypsi.base.CommandShortCircuit">
<em class="property">class </em><tt class="descclassname">pypsi.base.</tt><tt class="descname">CommandShortCircuit</tt><big>(</big><em>code</em><big>)</big><a class="reference internal" href="_modules/pypsi/base.html#CommandShortCircuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypsi.base.CommandShortCircuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.Exception</span></tt></p>
<p>Exception raised when the user enter invalid arguments or requests usage
information via the -h and &#8211;help flags.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> (<a class="reference external" href="http://docs.python.org/3.3/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; the code the command should return</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pypsi.cmdline.html" class="btn btn-neutral float-right" title="6. pypsi.cmdline - User input processing"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pypsi.shell.html" class="btn btn-neutral" title="4. pypsi.shell - Pypsi Shell"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Adam Meily.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<a href="https://github.com/ameily/pypsi"><img style="z-index:10; position: fixed; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

</body>
</html>